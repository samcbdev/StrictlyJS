"use strict";class Strictly{#t;#e;#r;#i=!1;#a=new WeakMap;static customValidators={};static customErrorMessages={};static registerValidator(t,e){Strictly.customValidators[t]=e}static registerErrorMessage(t,e){Strictly.customErrorMessages[t]=e}constructor(t,e={}){if(this.#t=t,null!=this.#t&&""!=this.#t)if(this.#r=Object.freeze({restrict:"showerror",fieldErrorClass:"strictly-validation-error",fieldSuccessClass:"strictly-validation-success",errorClass:"strictly-error-message",errorTag:"p",errorMessagePosition:"down",errorCustomClass:null,initError:!0,errorReturnType:"first",debounce:0,errorPlacement:null,onValidate:null,onSuccess:null,onError:null}),this.#e={...this.#r,...e},Object.assign(this.#e,{fieldErrorClass:this.#r.fieldErrorClass,fieldSuccessClass:this.#r.fieldSuccessClass,errorClass:this.#r.errorClass}),["showerror","oninput"].includes(this.#e.restrict))if(["down","up","custom"].includes(this.#e.errorMessagePosition)){if("custom"===this.#e.errorMessagePosition){if(!this.#e.errorCustomClass||"string"!=typeof this.#e.errorCustomClass)return void console.error("Invalid or missing 'errorCustomClass'. It must be a valid class name.");if(!/^[a-zA-Z0-9_-]+$/.test(this.#e.errorCustomClass))return void console.error(`Invalid class name '${this.#e.errorCustomClass}'. Class names can only contain letters, numbers, underscores (_), and dashes (-).`)}["p","div"].includes(this.#e.errorTag)?(this.#s(),this.#l()):console.error(`Invalid value for 'errorTag': ${this.#e.errorTag}. Allowed values: 'p', 'div'`)}else console.error(`Invalid value for 'errorMessagePosition': ${this.#e.errorMessagePosition}. Allowed values: 'down', 'up', 'custom'`);else console.error(`Invalid value for 'restrict': ${this.#e.restrict}. Allowed values: 'showerror', 'oninput'`);else console.error("Target element is not found")}#s(){document.querySelectorAll(this.#t).forEach((t=>this.#n(t)))}#l(){this.observer||(this.observer=new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{1===t.nodeType&&(t.matches("input, textarea, select")?this.#o(t):t.matches(this.#t)?this.#n(t):t.querySelectorAll("input, textarea, select").forEach((t=>{this.#o(t)})))}))}))})),this.observer.observe(document.body,{childList:!0,subtree:!0}))}#n(t){"form"===t.tagName.toLowerCase()?(t.setAttribute("novalidate",""),t.querySelectorAll("input, textarea, select").forEach((t=>this.#o(t,"form"))),t.addEventListener("submit",(async e=>{e.preventDefault(),this.#i||(this.#i=!0,t.querySelectorAll("input, textarea, select").forEach((t=>this.#u(t,"form"))));const r=await this.validate({formError:!0});"function"==typeof this.#e.onValidate&&this.#e.onValidate(r),r.isValid?"function"==typeof this.#e.onSuccess&&this.#e.onSuccess(r):"function"==typeof this.#e.onError&&this.#e.onError(r)}),!0)):["input","textarea","select"].includes(t.tagName.toLowerCase())?this.#o(t,"direct"):"div"===t.tagName.toLowerCase()&&t.querySelectorAll("input, textarea, select").forEach((t=>this.#o(t,"div")))}#o(t,e=null){if(!t.hasAttribute("data-strictly-connector"))if("checkbox"===t.type){let e=t.getAttribute("name");if(!document.querySelector(`input[name="${e}"]`).hasAttribute("data-strictly-connector")){let t=e+(1e16*Math.random()).toString(36);document.querySelectorAll(`input[name="${e}"]`).forEach((e=>{e.setAttribute("data-strictly-connector",t)}))}}else t.setAttribute("data-strictly-connector",t.name+(1e16*Math.random()).toString(36));this.#c(t),(this.#e.initError||this.#i)&&this.#u(t,e)}#u(t,e=null){const r=this.#e.debounce||0;t._strictlyDebounceTimer||(t._strictlyDebounceTimer=null),t.addEventListener("focus",(()=>{this.#a.get(t)||this.#a.set(t,!0)})),t.addEventListener("blur",(()=>{this.#a.get(t)&&this.#d(t)}));const i=()=>{this.#d(t)};t.addEventListener("input",(e=>{r>0?(t._strictlyDebounceTimer&&clearTimeout(t._strictlyDebounceTimer),t._strictlyDebounceTimer=setTimeout(i,r)):i()}))}#c(t){if(document.getElementById(t.getAttribute("data-strictly-connector")))return;if("checkbox"===t.type){let e=t.getAttribute("name");document.querySelector(`input[name="${e}"]`);if(document.getElementById(t.getAttribute("data-strictly-connector")))return}let e=document.createElement(this.#e.errorTag);switch(e.classList.add(this.#e.errorClass),e.setAttribute("id",t.getAttribute("data-strictly-connector")),e.setAttribute("role","alert"),e.setAttribute("aria-live","assertive"),"function"==typeof this.#e.errorPlacement&&this.#e.errorPlacement(t,e,""),this.#e.errorMessagePosition){case"down":t.insertAdjacentElement("afterend",e);break;case"up":t.insertAdjacentElement("beforebegin",e);break;case"custom":this.#e.errorCustomClass&&e.classList.add(this.#e.errorCustomClass),t.parentElement.appendChild(e);default:t.parentElement&&t.parentElement.appendChild(e)}}async validate(t={}){let e=t.formError??!1,r=this.#e.errorReturnType||"first",i=[],a={},s=!0;const l=document.querySelectorAll(this.#t);for(const t of l){let e=["input","textarea","select"].includes(t.tagName.toLowerCase())?[t]:t.querySelectorAll("input, textarea, select");for(const t of e)this.#a.set(t,!0)}for(const t of l){let l=["input","textarea","select"].includes(t.tagName.toLowerCase())?[t]:t.querySelectorAll("input, textarea, select");for(const t of l){let l=await this.#d(t,e,!0);if(a[t.name]=l.value,l.error.length>0){let e="first"===r?l.error[0]:l.error;i.push({field:t.name,message:e}),s=!1}}}const n={isValid:s,values:a,errors:i};return"function"==typeof this.#e.onValidate&&this.#e.onValidate(n),s&&"function"==typeof this.#e.onSuccess&&this.#e.onSuccess(n),s||"function"!=typeof this.#e.onError||this.#e.onError(n),n}#h(t,e){let r=!0;return e.querySelectorAll("input, textarea, select").forEach((t=>{this.#m(t);let e=this.#d(t);e&&!e.isValid&&(r=!1)})),r||t.preventDefault(),r}async#d(t,e=!0,r=!1){let i=!0,a=[];const s=!this.#a.get(t)&&!r;if((t.hasAttribute("required")||t.hasAttribute("data-strictly-required"))&&"false"!==t.getAttribute("data-strictly-required")&&!t.value.trim()){let l=t.getAttribute("aria-label")||t.name||"This field";s||("email"===t.type||"password"===t.type?a.push(`${l} is required.`):"checkbox"===t.type||"radio"===t.type?a.push(`Please select at least one option for ${l}.`):a.push(`${l} is required.`),i=!1)}if("false"!=t.getAttribute("data-strictly-required")||t.value.trim()||(i=!0),("email"==t.getAttribute("type")||"email"==t.getAttribute("data-strictly-type"))&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(t.value)){let n=t.getAttribute("aria-label")||t.name||"Email";a.push(`${n} must be a valid email address.`),i=!1}if("number"==t.getAttribute("data-strictly-type")&&isNaN(Number(t.value))){if("oninput"==this.#e.restrict){t.value=t.value.replace(/[^0-9.]/g,"");let u=t.value.split(".");u.length>2&&(t.value=u[0]+"."+u.slice(1).join(""))}let o=t.getAttribute("aria-label")||t.name||"Value";a.push(`${o} must be a valid number.`),i=!1}if(!("number"!=t.getAttribute("type")&&"integer"!=t.getAttribute("data-strictly-type")||Number.isInteger(Number(t.value))||("oninput"==this.#e.restrict&&(t.value=t.value.replace(/[^0-9-]/g,""),t.value.includes("-")&&(t.value="-"+t.value.replace(/-/g,"")),t.value=t.value.replace(/^(-?)0+(\d)/,"$1$2")),""===t.value.trim()||Number.isInteger(Number(t.value))))){let c=t.getAttribute("aria-label")||t.name||"Value";a.push(`${c} must be a whole number.`),i=!1}if("digits"==t.getAttribute("data-strictly-type")&&!/^\d+$/.test(t.value)){"oninput"==this.#e.restrict&&(t.value=t.value.replace(/\D/g,""));let d=t.getAttribute("aria-label")||t.name||"Value";a.push(`${d} must contain only digits.`),i=!1}if("alphanum"==t.getAttribute("data-strictly-type")&&!/^[a-zA-Z0-9]+$/.test(t.value)){"oninput"==this.#e.restrict&&(t.value=t.value.replace(/[^a-zA-Z0-9]/g,""));let h=t.getAttribute("aria-label")||t.name||"Value";a.push(`${h} must contain only letters and numbers.`),i=!1}if("alphanumspace"==t.getAttribute("data-strictly-type")&&!/^[a-zA-Z0-9 ]+$/.test(t.value)){"oninput"==this.#e.restrict&&(t.value=t.value.replace(/[^a-zA-Z0-9 ]/g,""));let m=t.getAttribute("aria-label")||t.name||"Value";a.push(`${m} can only contain letters, numbers, and spaces.`),i=!1}if("alphanumstrict"==t.getAttribute("data-strictly-type")){let p=t.value.replace(/[^a-zA-Z0-9]/g,""),f=/[a-zA-Z]/.test(p),b=/\d/.test(p);if("oninput"===this.#e.restrict&&(t.value=p),!f||!b){let g=t.getAttribute("aria-label")||t.name||"Value";a.push(`${g} must contain at least one letter and one number.`),i=!1}}if(("url"===t.getAttribute("type")||"url"===t.getAttribute("data-strictly-type"))&&!/^(https?|ftp):\/\/[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}([\/?#].*)?$|^mailto:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t.value)){"oninput"===this.#e.restrict&&(t.value=t.value.replace(/[^a-zA-Z0-9:/?&=._@+-]/g,""),t.value=t.value.replace(/\.{2,}/g,"."));let v=t.getAttribute("aria-label")||t.name||"This field";a.push(`${v} must be a valid URL or an email with 'mailto:' prefix.`),i=!1}if("date"===t.getAttribute("type")&&!t.hasAttribute("data-strictly-datetime")){let y=t.value.trim(),A=/^\d{4}-\d{2}-\d{2}$/.test(y);if("oninput"===this.#e.restrict&&(t.value=t.value.replace(/[^0-9-]/g,"")),!A){let $=t.getAttribute("aria-label")||t.name||"Date";a.push(`${$} must be a valid date (YYYY-MM-DD).`),i=!1}}if("time"===t.getAttribute("type")&&!t.hasAttribute("data-strictly-datetime")){let x=t.value.trim(),E=/^([01]\d|2[0-3]):([0-5]\d)$/.test(x);if("oninput"===this.#e.restrict&&(t.value=t.value.replace(/[^0-9:]/g,"")),!E){let w=t.getAttribute("aria-label")||t.name||"Time";a.push(`${w} must be a valid time (HH:MM, 24-hour format).`),i=!1}}if(t.hasAttribute("data-strictly-datetime")){const I=t.getAttribute("data-strictly-datetime"),C={"YYYY-MM-DD":{regex:/^(\d{4})-(\d{2})-(\d{2})$/,partialRegex:/^(\d{0,4})-?(\d{0,2})?-?(\d{0,2})?$/,validate:function(t){const e=t.match(this.regex);if(!e)return!1;const[r,i,a,s]=e.map(Number);return M(i,a,s)},formatPartial:function(t){t.length>10&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,i,a]=e.slice(1),s=r||"";return 4===r?.length&&(s+="-"),i&&(s+=i),2===i?.length&&(s+="-"),a&&(s+=a),s.replace(/-$/,"")}},"DD-MM-YYYY":{regex:/^(\d{2})-(\d{2})-(\d{4})$/,partialRegex:/^(\d{0,2})-?(\d{0,2})?-?(\d{0,4})?$/,validate:function(t){const e=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(!e)return!1;const[r,i,a,s]=e.map(Number);return M(s,a,i)},formatPartial:function(t){t.length>10&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,i,a]=e.slice(1),s=r||"";return 2===r?.length&&(s+="-"),i&&(s+=i),2===i?.length&&(s+="-"),a&&(s+=a),s.replace(/-$/,"")}},"YYYY-MM-DD HH:mm":{regex:/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/,partialRegex:/^(\d{0,4})-?(\d{0,2})?-?(\d{0,2})? ?(\d{0,2})?:?(\d{0,2})?$/,validate:function(t){const e=t.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/);if(!e)return!1;const[r,i,a,s,l,n]=e.map(Number);return M(i,a,s)&&S(l,n)},formatPartial:function(t){t.length>14&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,i,a,s,l]=e.slice(1),n=r||"";return 4===r?.length&&(n+="-"),i&&(n+=i),2===i?.length&&(n+="-"),a&&(n+=a),2===a?.length&&(n+=" "),s&&(n+=s),2===s?.length&&(n+=":"),l&&(n+=l),n.replace(/[-: ]$/,"")}},"DD-MM-YYYY HH:mm":{regex:/^(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})$/,partialRegex:/^(\d{0,2})-?(\d{0,2})?-?(\d{0,4})? ?(\d{0,2})?:?(\d{0,2})?$/,validate:function(t){const e=t.match(/^(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})$/);if(!e)return!1;const[r,i,a,s,l,n]=e.map(Number);return M(s,a,i)&&S(l,n)},formatPartial:function(t){t.length>14&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,i,a,s,l]=e.slice(1),n=r||"";return 2===r?.length&&(n+="-"),i&&(n+=i),2===i?.length&&(n+="-"),a&&(n+=a),4===a?.length&&(n+=" "),s&&(n+=s),2===s?.length&&(n+=":"),l&&(n+=l),n.replace(/[-: ]$/,"")}},"HH:mm":{regex:/^(\d{2}):(\d{2})$/,partialRegex:/^(\d{0,2}):?(\d{0,2})?$/,validate:function(t){const e=t.match(/^(\d{2}):(\d{2})$/);if(!e)return!1;const[r,i,a]=e.map(Number);return S(i,a)},formatPartial:function(t){t.length>4&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,i]=e.slice(1),a=r||"";return 2===r?.length&&(a+=":"),i&&(a+=i),a.replace(/:$/,"")}}};if(!I||!C.hasOwnProperty(I))return void console.error(`Invalid date/time format: "${I}". Expected one of: ${Object.keys(C).join(", ")}`);function M(t,e,r){if(e<1||e>12)return!1;const i=new Date(t,e,0).getDate();return r>=1&&r<=i}function S(t,e){return t>=0&&t<24&&e>=0&&e<60}if("oninput"===this.#e.restrict){let T=t.value,F=(t.selectionStart,T.replace(/[^0-9-]/g,""));F=F.replace(/--+/g,"-"),t.value=F;let N=C[I].formatPartial(F);N.startsWith("-")||N.endsWith("-")||N.endsWith(":")||(t.value=N)}if(!C[I].regex.test(t.value)||!C[I].validate(t.value)){let q=t.getAttribute("aria-label")||t.name||"Date";a.push(`${q} must be in the correct ${I} format.`),i=!1}}if(t.getAttribute("minlength")||t.hasAttribute("data-strictly-minlength")){let k=t.getAttribute("minlength")||t.getAttribute("data-strictly-minlength");if(parseInt(t.value.length,10)<parseInt(k,10)){let L=t.getAttribute("aria-label")||t.name||"This field";a.push(`${L} must be at least ${k} characters long.`),i=!1}}if(t.getAttribute("maxlength")||t.hasAttribute("data-strictly-maxlength")){let z=t.getAttribute("maxlength")||t.getAttribute("data-strictly-maxlength");if(parseInt(t.value.length,10)>parseInt(z,10)){"oninput"===this.#e.restrict&&(t.value=t.value.substring(0,z));let D=t.getAttribute("aria-label")||t.name||"This field";a.push(`${D} must not exceed ${z} characters.`),i=!1}}if(t.hasAttribute("data-strictly-length")){let P=t.getAttribute("data-strictly-length").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!P)return void console.error("Invalid format in data-strictly-length. Expected format: [min, max]");let Y=parseInt(P[1],10),V=parseInt(P[2],10);if("oninput"===this.#e.restrict&&t.value.length>V&&(t.value=t.value.substring(0,V)),t.value.length<Y||t.value.length>V){let Z=t.getAttribute("aria-label")||t.name||"This field";a.push(`${Z} must be between ${Y} and ${V} characters.`),i=!1}}if(t.hasAttribute("min")||t.hasAttribute("data-strictly-min")){let R=t.getAttribute("min")||t.getAttribute("data-strictly-min");if("oninput"===this.#e.restrict&&(t.value=t.value.replace(/\D/g,"")),/^-?\d*\.?\d+$/.test(t.value)){if(parseFloat(t.value)<parseFloat(R)){let j=t.getAttribute("aria-label")||t.name||"This field";a.push(`${j} must be at least ${R}.`),i=!1}}else a.push("Please enter a valid number."),i=!1}if(t.hasAttribute("max")||t.hasAttribute("data-strictly-max")){let O=t.getAttribute("max")||t.getAttribute("data-strictly-max");if("oninput"===this.#e.restrict&&(t.value=t.value.replace(/\D/g,"")),/^-?\d*\.?\d+$/.test(t.value)){if(parseFloat(t.value)>parseFloat(O)){let _=t.getAttribute("aria-label")||t.name||"This field";a.push(`${_} must be less than or equal to ${O}.`),i=!1}}else a.push("Please enter a valid number."),i=!1}if(t.hasAttribute("data-strictly-range")){let H=t.getAttribute("data-strictly-range").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!H)return void console.error("Invalid format in data-strictly-range. Expected format: [min, max]");let B=parseFloat(H[1]),W=parseFloat(H[2]);"oninput"===this.#e.restrict&&(t.value=t.value.replace(/[^0-9.-]/g,""));let U=parseFloat(t.value);if(isNaN(U))a.push("Please enter a valid number."),i=!1;else if(U<B||U>W){let G=t.getAttribute("aria-label")||t.name||"This field";a.push(`${G} must be between ${B} and ${W}.`),i=!1}}if(t.hasAttribute("data-strictly-pattern")){let J=t.getAttribute("data-strictly-pattern");if(!new RegExp(J).test(t.value)){let K=t.getAttribute("aria-label")||t.name||"This field";a.push(`${K} must match the required pattern.`),i=!1}}if(t.hasAttribute("data-strictly-password")){let Q=t.getAttribute("data-strictly-password").split(","),X=!1,tt=!1,et=!1,rt=0,it=0,at=1/0;if(Q.forEach((t=>{"alpha:caps"===t&&(X=!0),"alpha:small"===t&&(tt=!0),"num"===t&&(et=!0),t.includes("special:min=")&&(rt=parseInt(t.split("=")[1],10)),t.includes("min=")&&(it=parseInt(t.split("=")[1],10)),t.includes("max=")&&(at=parseInt(t.split("=")[1],10))})),"oninput"===this.#e.restrict){let dt=t.value.replace(/[^a-zA-Z0-9!@#$%^&*()_+~`|}{[\]:;?><,./-=]/g,"");dt.length>at&&(dt=dt.substring(0,at)),t.value!==dt&&(t.value=dt)}let st=t.value,lt=/[A-Z]/.test(st),nt=/[a-z]/.test(st),ot=/[0-9]/.test(st),ut=(st.match(/[^a-zA-Z0-9]/g)||[]).length,ct=[];if(st.length<it&&ct.push(`at least ${it} characters`),st.length>at&&ct.push(`at most ${at} characters`),X&&!lt&&ct.push("1 uppercase letter"),tt&&!nt&&ct.push("1 lowercase letter"),et&&!ot&&ct.push("1 number"),ut<rt&&ct.push(`${rt} special character(s)`),ct.length){let ht=t.getAttribute("aria-label")||t.name||"This field";a.push(`${ht} must contain ${ct.join(", ")}.`),i=!1}}if(t.hasAttribute("data-strictly-mincheck")){if("checkbox"!==t.type)return void console.error("Validation error: The field must be a checkbox.");let mt=t.getAttribute("name"),pt=parseInt(t.getAttribute("data-strictly-mincheck"),10);if([...document.querySelectorAll(`input[name="${mt}"]`)].filter((t=>t.checked)).length<pt){let ft=t.getAttribute("aria-label")||mt||"This field";a.push(`${ft}: You must select at least ${pt} options.`),i=!1}}if(t.hasAttribute("data-strictly-maxcheck")){if("checkbox"!==t.type)return void console.error("Validation error: The field must be a checkbox.");let bt=t.getAttribute("name"),gt=parseInt(t.getAttribute("data-strictly-maxcheck"),10),vt=document.querySelectorAll(`input[name="${bt}"]`);if([...vt].filter((t=>t.checked)).length>gt){"oninput"===this.#e.restrict&&(t.checked=!1);let yt=t.getAttribute("aria-label")||bt||"This field";a.push(`${yt}: You can select up to ${gt} options.`),i=!1}t.dataset.listenerAdded||(vt.forEach((t=>{t.addEventListener("change",(()=>{let e=[...vt].filter((t=>t.checked)).length;e>gt&&(t.checked=!1)}))})),t.dataset.listenerAdded="true")}if(t.hasAttribute("data-strictly-check")){if("checkbox"!==t.type)return void console.error("Validation error: The field must be a checkbox.");let At=t.getAttribute("name"),$t=t.getAttribute("data-strictly-check").trim(),xt=$t.match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!xt)return void console.error(`Invalid format in data-strictly-check: Expected format [min, max], got '${$t}'`);let Et=parseInt(xt[1],10),wt=parseInt(xt[2],10),It=document.querySelectorAll(`input[name="${At}"]`),Ct=[...It].filter((t=>t.checked)).length;if(Ct<Et||Ct>wt){"oninput"===this.#e.restrict&&Ct>wt&&(t.checked=!1);let Mt=t.getAttribute("aria-label")||At||"This field";a.push(`${Mt}: Please select between ${Et} and ${wt} options.`),i=!1}t.dataset.listenerAdded||(It.forEach((t=>{t.addEventListener("change",(()=>{let e=[...It].filter((t=>t.checked)).length;e>wt&&(t.checked=!1)}))})),t.dataset.listenerAdded="true")}if(t.hasAttribute("data-strictly-equalto")){let St=t.getAttribute("data-strictly-equalto"),Tt=document.querySelector(St);if(!Tt)return void console.error(`Invalid target selector in data-strictly-equalto: "${St}" does not match any element.`);if(Tt.value!==t.value){let Ft=t.getAttribute("aria-label")||t.getAttribute("name")||"This field",Nt=Tt.getAttribute("aria-label")||Tt.getAttribute("name")||"the referenced field";a.push(`${Ft} must be equal to ${Nt}.`),i=!1}}if(t.hasAttribute("data-strictly-minwords")){let qt=t.getAttribute("data-strictly-minwords");if(qt=parseInt(qt,10),isNaN(qt)||qt<1)return void console.error(`Invalid value in data-strictly-minwords: "${qt}". It must be a positive number.`);qt>t.value.trim().split(/\s+/).filter((t=>t.length>0)).length&&(a.push(`At least ${qt} words are required.`),i=!1)}if(t.hasAttribute("data-strictly-maxwords")){let kt=t.getAttribute("data-strictly-maxwords");if(kt=parseInt(kt,10),isNaN(kt)||kt<1)return void console.error(`Invalid value in data-strictly-maxwords: "${kt}". It must be a positive number.`);let Lt=t.value.trim().split(/\s+/).filter((t=>t.length>0));Lt.length>kt&&("oninput"===this.#e.restrict&&(t.value=Lt.slice(0,kt).join(" ")),a.push(`A maximum of ${kt} words are allowed.`),i=!1)}if(t.hasAttribute("data-strictly-words")){let zt=t.getAttribute("data-strictly-words").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!zt)return void console.error("Invalid format in data-strictly-words. Expected format: [min, max]");let Dt=parseInt(zt[1],10),Pt=parseInt(zt[2],10);if(Dt<0||Pt<Dt)return void console.error(`Invalid min/max values in data-strictly-words: Min (${Dt}) should be non-negative, and Max (${Pt}) should be greater than or equal to Min.`);let Yt=t.value.trim().split(/\s+/).filter((t=>t.length>0));if(Yt.length<Dt||Yt.length>Pt){"oninput"===this.#e.restrict&&Yt.length>Pt&&(t.value=Yt.slice(0,Pt).join(" "));let Vt=t.getAttribute("aria-label")||t.name||"This field";a.push(`${Vt} must contain between ${Dt} and ${Pt} words.`),i=!1}}if(t.hasAttribute("data-strictly-mincharacters")){let Zt=t.getAttribute("data-strictly-mincharacters");if(Zt=parseInt(Zt,10),isNaN(Zt)||Zt<1)return void console.error(`Invalid value in data-strictly-mincharacters: "${Zt}". It must be a positive number.`);t.value.trim().length<Zt&&(a.push(`At least ${Zt} characters are required.`),i=!1)}if(t.hasAttribute("data-strictly-maxcharacters")){let Rt=t.getAttribute("data-strictly-maxcharacters");if(Rt=parseInt(Rt,10),isNaN(Rt)||Rt<1)return void console.error(`Invalid value in data-strictly-maxcharacters: "${Rt}". It must be a positive number.`);t.value.trim().length>Rt&&("oninput"===this.#e.restrict&&(t.value=t.value.substring(0,Rt)),a.push(`Maximum allowed characters: ${Rt}.`),i=!1)}if(t.hasAttribute("data-strictly-characters")){let jt=t.getAttribute("data-strictly-characters").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!jt)return void console.error("Invalid format in data-strictly-characters. Expected format: [min, max]");let Ot=parseInt(jt[1],10),_t=parseInt(jt[2],10);if(Ot<0||_t<Ot)return void console.error(`Invalid min/max values in data-strictly-characters: Min (${Ot}) should be non-negative, and Max (${_t}) should be greater than or equal to Min.`);let Ht=t.value.trim().length;if(Ht<Ot||Ht>_t){"oninput"===this.#e.restrict&&Ht>_t&&(t.value=t.value.substring(0,_t));let Bt=t.getAttribute("aria-label")||t.name||"This field";a.push(`${Bt} must contain between ${Ot} and ${_t} characters.`),i=!1}}if(t.hasAttribute("data-strictly-minselect")){if("select"!==t.tagName.toLowerCase())return void console.error("Invalid element: data-strictly-minselect can only be used on <select> elements.");let Wt=parseInt(t.getAttribute("data-strictly-minselect"),10);if(isNaN(Wt)||Wt<1)return void console.error(`Invalid value in data-strictly-minselect: "${Wt}". It must be a number greater than 0.`);[...t.options].filter((t=>t.selected&&""!==t.value.trim())).length<Wt&&(a.push(`You must select at least ${Wt} option(s).`),i=!1)}if(t.hasAttribute("data-strictly-maxselect")){if("select"!==t.tagName.toLowerCase())return void console.error("Invalid element: data-strictly-maxselect can only be used on <select> elements.");let Ut=parseInt(t.getAttribute("data-strictly-maxselect"),10);if(isNaN(Ut)||Ut<1)return void console.error(`Invalid value in data-strictly-maxselect: "${Ut}". It must be a number greater than 0.`);let Gt=[...t.options].filter((t=>t.selected&&""!==t.value.trim()));Gt.length>Ut&&("oninput"===this.#e.restrict&&(Gt[Gt.length-1].selected=!1),a.push(`You can select a maximum of ${Ut} option(s).`),i=!1)}if(t.hasAttribute("data-strictly-select")){if("select"!==t.tagName.toLowerCase())return void console.error("Field must be a <select> element.");let Jt=t.getAttribute("data-strictly-select").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!Jt)return void console.error("Invalid format in data-strictly-select. Expected format: [min, max]");let Kt=parseInt(Jt[1],10),Qt=parseInt(Jt[2],10);if(Kt<0||Qt<Kt)return void console.error(`Invalid min/max values in data-strictly-select: Min (${Kt}) must be non-negative, and Max (${Qt}) must be greater than or equal to Min.`);let Xt=[...t.options].filter((t=>t.selected&&""!==t.value.trim()));if(Xt.length<Kt||Xt.length>Qt){"oninput"===this.#e.restrict&&Xt.length>Qt&&(Xt[Xt.length-1].selected=!1);let te=t.getAttribute("aria-label")||t.getAttribute("name")||"Selection";a.push(`${te} must have between ${Kt} and ${Qt} selected options.`),i=!1}}if(t.hasAttribute("data-strictly-custom")){const ee=t.getAttribute("data-strictly-custom").split(",").map((t=>t.trim())).filter(Boolean);for(const re of ee){let ie,ae=re;if(re.includes("=")){const se=re.indexOf("=");ae=re.slice(0,se).trim(),ie=re.slice(se+1).trim()}if(Strictly.customValidators[ae]){let le=Strictly.customValidators[ae](t.value,t,this.#e,ie);le instanceof Promise&&(le=await le),"object"==typeof le&&null!==le&&"valid"in le?("oninput"===this.#e.restrict&&"string"==typeof le.corrected&&le.corrected!==t.value&&(t.value=le.corrected),le.valid||(a.push(Strictly.customErrorMessages[ae]||`${t.name} failed custom validation.`),i=!1)):le||(a.push(Strictly.customErrorMessages[ae]||`${t.name} failed custom validation.`),i=!1)}}}if(t.hasAttribute("data-strictly-initialnospace")&&/^\s/.test(t.value)){"oninput"===this.#e.restrict&&(t.value=t.value.replace(/^\s+/,""));let ne=t.getAttribute("aria-label")||t.name||"This field";a.push(`${ne} must not start with a space.`),i=!1}if(t.hasAttribute("data-strictly-singlespace")&&/ {2,}/.test(t.value)){"oninput"===this.#e.restrict&&(t.value=t.value.replace(/ {2,}/g," "));let oe=t.getAttribute("aria-label")||t.name||"This field";a.push(`${oe} must have only single spaces between words.`),i=!1}if("file"===t.type){const ue=t.files,ce=t.getAttribute("aria-label")||t.name||"File";if(t.hasAttribute("data-strictly-filecount")){const de=t.getAttribute("data-strictly-filecount").match(/\[\s*(\d+)\s*,\s*(\d+)\s*\]/);if(de){const he=parseInt(de[1],10),me=parseInt(de[2],10);(ue.length<he||ue.length>me)&&(a.push(`${ce} must have between ${he} and ${me} file(s).`),i=!1)}}if(t.hasAttribute("data-strictly-filetype")){const pe=t.getAttribute("data-strictly-filetype").split(",").map((t=>t.trim().toLowerCase()));for(let fe=0;fe<ue.length;fe++){const be=ue[fe],ge=be.type.toLowerCase(),ve=be.name.split(".").pop().toLowerCase();pe.includes(ge)||pe.includes("."+ve)||(a.push(`${ce}: File '${be.name}' must be of type: ${pe.join(", ")}`),i=!1)}}if(t.hasAttribute("data-strictly-filesize")){const ye=parseInt(t.getAttribute("data-strictly-filesize"),10);for(let Ae=0;Ae<ue.length;Ae++){const $e=ue[Ae];$e.size>ye&&(a.push(`${ce}: File '${$e.name}' exceeds max size of ${ye} bytes.`),i=!1)}}}e&&(i?this.#m(t):this.#p(t,a));return{isValid:i,value:({checkbox:()=>document.querySelectorAll(`input[name="${t.name}"]:checked`).length,"select-multiple":()=>Array.from(t.selectedOptions).map((t=>t.value))}[t.type]||(()=>t.value))(),error:a}}#p(t,e){this.#m(t),t.classList.remove(this.#e.fieldSuccessClass),t.classList.add(this.#e.fieldErrorClass);let r=this.#e.errorReturnType||"first",i=t.getAttribute("data-strictly-message");i&&(e=i);let a=t.getAttribute("data-strictly-connector");if(!a)return;let s=document.getElementById(a);if(s){s.classList.add("filled");let i="";i=Array.isArray(e)?"all"===r?e.join("<br>"):e[0]:e,"function"==typeof this.#e.errorPlacement?this.#e.errorPlacement(t,s,i):s.innerHTML=i}t.setAttribute("aria-invalid","true"),t.setAttribute("aria-describedby",a)}#m(t){if(!t||!t.hasAttribute("data-strictly-connector"))return;t.classList.remove(this.#e.fieldErrorClass);let e=t.getAttribute("data-strictly-connector");if(!e)return;let r=document.getElementById(e);r&&(r.textContent="",r.classList.remove("filled")),t.classList.add(this.#e.fieldSuccessClass),t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby")}}"undefined"!=typeof window&&(window.Strictly=Strictly);