"use strict";class Strictly{#a;#b;#c;#d=!1;constructor(t,e={}){if(this.#a=t,null==this.#a||""==this.#a){console.error("Target element is not found");return}if(this.#c=Object.freeze({restrict:"showerror",fieldErrorClass:"strictly-validation-error",fieldSuccessClass:"strictly-validation-success",errorClass:"strictly-error-message",errorTag:"p",errorMessagePosition:"down",errorCustomClass:null,initError:!0}),this.#b={...this.#c,...e},Object.assign(this.#b,{fieldErrorClass:this.#c.fieldErrorClass,fieldSuccessClass:this.#c.fieldSuccessClass,errorClass:this.#c.errorClass}),!["showerror","oninput"].includes(this.#b.restrict)){console.error(`Invalid value for 'restrict': ${this.#b.restrict}. Allowed values: 'showerror', 'oninput'`);return}if(!["down","up","custom"].includes(this.#b.errorMessagePosition)){console.error(`Invalid value for 'errorMessagePosition': ${this.#b.errorMessagePosition}. Allowed values: 'down', 'up', 'custom'`);return}if("custom"===this.#b.errorMessagePosition){if(!this.#b.errorCustomClass||"string"!=typeof this.#b.errorCustomClass){console.error("Invalid or missing 'errorCustomClass'. It must be a valid class name.");return}let r=/^[a-zA-Z0-9_-]+$/;if(!r.test(this.#b.errorCustomClass)){console.error(`Invalid class name '${this.#b.errorCustomClass}'. Class names can only contain letters, numbers, underscores (_), and dashes (-).`);return}}if(!["p","div"].includes(this.#b.errorTag)){console.error(`Invalid value for 'errorTag': ${this.#b.errorTag}. Allowed values: 'p', 'div'`);return}this.#e(),this.#f()}#e(){document.querySelectorAll(this.#a).forEach(t=>this.#g(t))}#f(){this.observer||(this.observer=new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{1===t.nodeType&&(t.matches("input, textarea, select")?this.#h(t):t.matches(this.#a)?this.#g(t):t.querySelectorAll("input, textarea, select").forEach(t=>{this.#h(t)}))})})}),this.observer.observe(document.body,{childList:!0,subtree:!0}))}#g(t){"form"===t.tagName.toLowerCase()?(t.setAttribute("novalidate",""),t.querySelectorAll("input, textarea, select").forEach(t=>this.#h(t,"form")),t.addEventListener("submit",e=>{e.preventDefault(),this.#d||(this.#d=!0,t.querySelectorAll("input, textarea, select").forEach(t=>this.#i(t,"form"))),this.#j(e,t)&&t.submit()},!0)):["input","textarea","select"].includes(t.tagName.toLowerCase())?this.#h(t,"direct"):"div"===t.tagName.toLowerCase()&&t.querySelectorAll("input, textarea, select").forEach(t=>this.#h(t,"div"))}#h(e,r=null){if(!e.hasAttribute("data-strictly-connector")){if("checkbox"===e.type){let a=e.getAttribute("name");if(!document.querySelector(`input[name="${a}"]`).hasAttribute("data-strictly-connector")){let i=a+(1e16*Math.random()).toString(36);document.querySelectorAll(`input[name="${a}"]`).forEach(t=>{t.setAttribute("data-strictly-connector",i)})}}else e.setAttribute("data-strictly-connector",e.name+(1e16*Math.random()).toString(36))}this.#k(e),this.#b.initError?this.#i(e,r):this.#d&&this.#i(e,r)}#i(l,s=null){["input","focus","blur"].forEach(t=>{l.addEventListener("input",()=>{this.#l(l)})})}#k(n){if(document.getElementById(n.getAttribute("data-strictly-connector")))return;if("checkbox"===n.type){let u=n.getAttribute("name");if(document.querySelector(`input[name="${u}"]`),document.getElementById(n.getAttribute("data-strictly-connector")))return}let o=document.createElement(this.#b.errorTag);switch(o.classList.add(this.#b.errorClass),o.setAttribute("id",n.getAttribute("data-strictly-connector")),this.#b.errorMessagePosition){case"down":n.insertAdjacentElement("afterend",o);break;case"up":n.insertAdjacentElement("beforebegin",o);break;case"custom":this.#b.errorCustomClass&&o.classList.add(this.#b.errorCustomClass),n.parentElement.appendChild(o);default:n.parentElement&&n.parentElement.appendChild(o)}}validate(t={}){let e=t.formError??!1,r=[],a={};return document.querySelectorAll(this.#a).forEach(t=>{(["input","textarea","select"].includes(t.tagName.toLowerCase())?[t]:t.querySelectorAll("input, textarea, select")).forEach(t=>{let i=this.#l(t,e);a[t.name]=i.value,i.error.length>0&&r.push({field:t.name,message:i.error})})}),{isValid:0===r.length,values:a,errors:r}}#j(c,d){let h=!0;return d.querySelectorAll("input, textarea, select").forEach(t=>{this.#m(t);let e=this.#l(t);e&&!e.isValid&&(h=!1)}),h||c.preventDefault(),h}#l(m,p=!0){let g=!0,b=[];if((m.hasAttribute("required")||m.hasAttribute("data-strictly-required"))&&"false"!==m.getAttribute("data-strictly-required")&&!m.value.trim()){let f=m.getAttribute("aria-label")||m.name||"This field";"email"===m.type?b.push(`${f} is required. Please enter a valid email address.`):"password"===m.type?b.push(`${f} is required. Please enter a password.`):"checkbox"===m.type||"radio"===m.type?b.push(`Please select at least one option for ${f}.`):b.push(`${f} is required.`),g=!1}if("false"!=m.getAttribute("data-strictly-required")||m.value.trim()||(g=!0),("email"==m.getAttribute("type")||"email"==m.getAttribute("data-strictly-type"))&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(m.value)){let v=m.getAttribute("aria-label")||m.name||"Email";b.push(`${v} must be a valid email address.`),g=!1}if("number"==m.getAttribute("data-strictly-type")&&isNaN(Number(m.value))){if("oninput"==this.#b.restrict){m.value=m.value.replace(/[^0-9.]/g,"");let A=m.value.split(".");A.length>2&&(m.value=A[0]+"."+A.slice(1).join(""))}let y=m.getAttribute("aria-label")||m.name||"Value";b.push(`${y} must be a valid number.`),g=!1}if(("number"==m.getAttribute("type")||"integer"==m.getAttribute("data-strictly-type"))&&!Number.isInteger(Number(m.value))&&("oninput"==this.#b.restrict&&(m.value=m.value.replace(/[^0-9-]/g,""),m.value.includes("-")&&(m.value="-"+m.value.replace(/-/g,"")),m.value=m.value.replace(/^(-?)0+(\d)/,"$1$2")),""!==m.value.trim()&&!Number.isInteger(Number(m.value)))){let _=m.getAttribute("aria-label")||m.name||"Value";b.push(`${_} must be a whole number.`),g=!1}if("digits"==m.getAttribute("data-strictly-type")&&!/^\d+$/.test(m.value)){"oninput"==this.#b.restrict&&(m.value=m.value.replace(/\D/g,""));let $=m.getAttribute("aria-label")||m.name||"Value";b.push(`${$} must contain only digits.`),g=!1}if("alphanum"==m.getAttribute("data-strictly-type")&&!/^[a-zA-Z0-9]+$/.test(m.value)){"oninput"==this.#b.restrict&&(m.value=m.value.replace(/[^a-zA-Z0-9]/g,""));let x=m.getAttribute("aria-label")||m.name||"Value";b.push(`${x} must contain only letters and numbers.`),g=!1}if("alphanumspace"==m.getAttribute("data-strictly-type")&&!/^[a-zA-Z0-9 ]+$/.test(m.value)){"oninput"==this.#b.restrict&&(m.value=m.value.replace(/[^a-zA-Z0-9 ]/g,""));let E=m.getAttribute("aria-label")||m.name||"Value";b.push(`${E} can only contain letters, numbers, and spaces.`),g=!1}if("alphanumstrict"==m.getAttribute("data-strictly-type")){let w=m.value.replace(/[^a-zA-Z0-9]/g,""),C=/[a-zA-Z]/.test(w),I=/\d/.test(w);if("oninput"===this.#b.restrict&&(m.value=w),!(C&&I)){let q=m.getAttribute("aria-label")||m.name||"Value";b.push(`${q} must contain at least one letter and one number.`),g=!1}}if(("url"===m.getAttribute("type")||"url"===m.getAttribute("data-strictly-type"))&&!/^(https?|ftp):\/\/[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}([\/?#].*)?$|^mailto:[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(m.value)){"oninput"===this.#b.restrict&&(m.value=m.value.replace(/[^a-zA-Z0-9:/?&=._@+-]/g,""),m.value=m.value.replace(/\.{2,}/g,"."));let k=m.getAttribute("aria-label")||m.name||"This field";b.push(`${k} must be a valid URL or an email with 'mailto:' prefix.`),g=!1}if("date"===m.getAttribute("type")&&!m.hasAttribute("data-strictly-datetime")){let M=m.value.trim(),T=/^\d{4}-\d{2}-\d{2}$/.test(M);if("oninput"===this.#b.restrict&&(m.value=m.value.replace(/[^0-9-]/g,"")),!T){let S=m.getAttribute("aria-label")||m.name||"Date";b.push(`${S} must be a valid date (YYYY-MM-DD).`),g=!1}}if("time"===m.getAttribute("type")&&!m.hasAttribute("data-strictly-datetime")){let L=m.value.trim(),Y=/^([01]\d|2[0-3]):([0-5]\d)$/.test(L);if("oninput"===this.#b.restrict&&(m.value=m.value.replace(/[^0-9:]/g,"")),!Y){let z=m.getAttribute("aria-label")||m.name||"Time";b.push(`${z} must be a valid time (HH:MM, 24-hour format).`),g=!1}}if(m.hasAttribute("data-strictly-datetime")){let P=m.getAttribute("data-strictly-datetime"),Z={"YYYY-MM-DD":{regex:/^(\d{4})-(\d{2})-(\d{2})$/,partialRegex:/^(\d{0,4})-?(\d{0,2})?-?(\d{0,2})?$/,validate:function(t){let e=t.match(this.regex);if(!e)return!1;let[r,a,i,l]=e.map(Number);return D(a,i,l)},formatPartial:function(t){t.length>10&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,a,i]=e.slice(1),l=r||"";return r?.length===4&&(l+="-"),a&&(l+=a),a?.length===2&&(l+="-"),i&&(l+=i),l.replace(/-$/,"")}},"DD-MM-YYYY":{regex:/^(\d{2})-(\d{2})-(\d{4})$/,partialRegex:/^(\d{0,2})-?(\d{0,2})?-?(\d{0,4})?$/,validate:function(t){let e=t.match(/^(\d{2})-(\d{2})-(\d{4})$/);if(!e)return!1;let[r,a,i,l]=e.map(Number);return D(l,i,a)},formatPartial:function(t){t.length>10&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,a,i]=e.slice(1),l=r||"";return r?.length===2&&(l+="-"),a&&(l+=a),a?.length===2&&(l+="-"),i&&(l+=i),l.replace(/-$/,"")}},"YYYY-MM-DD HH:mm":{regex:/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/,partialRegex:/^(\d{0,4})-?(\d{0,2})?-?(\d{0,2})? ?(\d{0,2})?:?(\d{0,2})?$/,validate:function(t){let e=t.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2})$/);if(!e)return!1;let[r,a,i,l,s,n]=e.map(Number);return D(a,i,l)&&F(s,n)},formatPartial:function(t){t.length>14&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,a,i,l,s]=e.slice(1),n=r||"";return r?.length===4&&(n+="-"),a&&(n+=a),a?.length===2&&(n+="-"),i&&(n+=i),i?.length===2&&(n+=" "),l&&(n+=l),l?.length===2&&(n+=":"),s&&(n+=s),n.replace(/[-: ]$/,"")}},"DD-MM-YYYY HH:mm":{regex:/^(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})$/,partialRegex:/^(\d{0,2})-?(\d{0,2})?-?(\d{0,4})? ?(\d{0,2})?:?(\d{0,2})?$/,validate:function(t){let e=t.match(/^(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2})$/);if(!e)return!1;let[r,a,i,l,s,n]=e.map(Number);return D(l,i,a)&&F(s,n)},formatPartial:function(t){t.length>14&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,a,i,l,s]=e.slice(1),n=r||"";return r?.length===2&&(n+="-"),a&&(n+=a),a?.length===2&&(n+="-"),i&&(n+=i),i?.length===4&&(n+=" "),l&&(n+=l),l?.length===2&&(n+=":"),s&&(n+=s),n.replace(/[-: ]$/,"")}},"HH:mm":{regex:/^(\d{2}):(\d{2})$/,partialRegex:/^(\d{0,2}):?(\d{0,2})?$/,validate:function(t){let e=t.match(/^(\d{2}):(\d{2})$/);if(!e)return!1;let[r,a,i]=e.map(Number);return F(a,i)},formatPartial:function(t){t.length>4&&(t=t.slice(0,-1));let e=t.match(this.partialRegex);if(!e)return"";let[r,a]=e.slice(1),i=r||"";return r?.length===2&&(i+=":"),a&&(i+=a),i.replace(/:$/,"")}}};if(!P||!Z.hasOwnProperty(P)){console.error(`Invalid date/time format: "${P}". Expected one of: ${Object.keys(Z).join(", ")}`);return}function D(t,e,r){if(e<1||e>12)return!1;let a=new Date(t,e,0).getDate();return r>=1&&r<=a}function F(t,e){return t>=0&&t<24&&e>=0&&e<60}if("oninput"===this.#b.restrict){let R=m.value;m.selectionStart;let V=R.replace(/[^0-9-]/g,"");V=V.replace(/--+/g,"-"),m.value=V;let N=Z[P].formatPartial(V);N.startsWith("-")||N.endsWith("-")||N.endsWith(":")||(m.value=N)}if(!Z[P].regex.test(m.value)||!Z[P].validate(m.value)){let H=m.getAttribute("aria-label")||m.name||"Date";b.push(`${H} must be in the correct ${P} format.`),g=!1}}if(m.getAttribute("minlength")||m.hasAttribute("data-strictly-minlength")){let j=m.getAttribute("minlength")||m.getAttribute("data-strictly-minlength");if(parseInt(m.value.length,10)<parseInt(j,10)){let O=m.getAttribute("aria-label")||m.name||"This field";b.push(`${O} must be at least ${j} characters long.`),g=!1}}if(m.getAttribute("maxlength")||m.hasAttribute("data-strictly-maxlength")){let B=m.getAttribute("maxlength")||m.getAttribute("data-strictly-maxlength");if(parseInt(m.value.length,10)>parseInt(B,10)){"oninput"===this.#b.restrict&&(m.value=m.value.substring(0,B));let W=m.getAttribute("aria-label")||m.name||"This field";b.push(`${W} must not exceed ${B} characters.`),g=!1}}if(m.hasAttribute("data-strictly-length")){let U=m.getAttribute("data-strictly-length").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!U){console.error("Invalid format in data-strictly-length. Expected format: [min, max]");return}let G=parseInt(U[1],10),J=parseInt(U[2],10);if("oninput"===this.#b.restrict&&m.value.length>J&&(m.value=m.value.substring(0,J)),m.value.length<G||m.value.length>J){let K=m.getAttribute("aria-label")||m.name||"This field";b.push(`${K} must be between ${G} and ${J} characters.`),g=!1}}if(m.hasAttribute("min")||m.hasAttribute("data-strictly-min")){let Q=m.getAttribute("min")||m.getAttribute("data-strictly-min");if("oninput"===this.#b.restrict&&(m.value=m.value.replace(/\D/g,"")),/^-?\d*\.?\d+$/.test(m.value)){if(parseFloat(m.value)<parseFloat(Q)){let X=m.getAttribute("aria-label")||m.name||"This field";b.push(`${X} must be at least ${Q}.`),g=!1}}else b.push("Please enter a valid number."),g=!1}if(m.hasAttribute("max")||m.hasAttribute("data-strictly-max")){let tt=m.getAttribute("max")||m.getAttribute("data-strictly-max");if("oninput"===this.#b.restrict&&(m.value=m.value.replace(/\D/g,"")),/^-?\d*\.?\d+$/.test(m.value)){if(parseFloat(m.value)>parseFloat(tt)){let te=m.getAttribute("aria-label")||m.name||"This field";b.push(`${te} must be less than or equal to ${tt}.`),g=!1}}else b.push("Please enter a valid number."),g=!1}if(m.hasAttribute("data-strictly-range")){let tr=m.getAttribute("data-strictly-range").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!tr){console.error("Invalid format in data-strictly-range. Expected format: [min, max]");return}let ta=parseFloat(tr[1]),ti=parseFloat(tr[2]);"oninput"===this.#b.restrict&&(m.value=m.value.replace(/[^0-9.-]/g,""));let tl=parseFloat(m.value);if(isNaN(tl))b.push("Please enter a valid number."),g=!1;else if(tl<ta||tl>ti){let ts=m.getAttribute("aria-label")||m.name||"This field";b.push(`${ts} must be between ${ta} and ${ti}.`),g=!1}}if(m.hasAttribute("data-strictly-pattern")&&!RegExp(m.getAttribute("data-strictly-pattern")).test(m.value)){let tn=m.getAttribute("aria-label")||m.name||"This field";b.push(`${tn} must match the required pattern.`),g=!1}if(m.hasAttribute("data-strictly-password")){let tu=m.getAttribute("data-strictly-password").split(","),to=!1,tc=!1,td=!1,th=0,tm=0,tp=1/0;if(tu.forEach(t=>{"alpha:caps"===t&&(to=!0),"alpha:small"===t&&(tc=!0),"num"===t&&(td=!0),t.includes("special:min=")&&(th=parseInt(t.split("=")[1],10)),t.includes("min=")&&(tm=parseInt(t.split("=")[1],10)),t.includes("max=")&&(tp=parseInt(t.split("=")[1],10))}),"oninput"===this.#b.restrict){let tg=m.value.replace(/[^a-zA-Z0-9!@#$%^&*()_+~`|}{[\]:;?><,./-=]/g,"");tg.length>tp&&(tg=tg.substring(0,tp)),m.value!==tg&&(m.value=tg)}let tb=m.value,tf=/[A-Z]/.test(tb),tv=/[a-z]/.test(tb),tA=/[0-9]/.test(tb),ty=(tb.match(/[^a-zA-Z0-9]/g)||[]).length,t9=[];if(tb.length<tm&&t9.push(`at least ${tm} characters`),tb.length>tp&&t9.push(`at most ${tp} characters`),to&&!tf&&t9.push("1 uppercase letter"),tc&&!tv&&t9.push("1 lowercase letter"),td&&!tA&&t9.push("1 number"),ty<th&&t9.push(`${th} special character(s)`),t9.length){let t_=m.getAttribute("aria-label")||m.name||"This field";b.push(`${t_} must contain ${t9.join(", ")}.`),g=!1}}if(m.hasAttribute("data-strictly-mincheck")){if("checkbox"!==m.type){console.error("Validation error: The field must be a checkbox.");return}let t$=m.getAttribute("name"),tx=parseInt(m.getAttribute("data-strictly-mincheck"),10);if([...document.querySelectorAll(`input[name="${t$}"]`)].filter(t=>t.checked).length<tx){let t0=m.getAttribute("aria-label")||t$||"This field";b.push(`${t0}: You must select at least ${tx} options.`),g=!1}}if(m.hasAttribute("data-strictly-maxcheck")){if("checkbox"!==m.type){console.error("Validation error: The field must be a checkbox.");return}let tE=m.getAttribute("name"),tw=parseInt(m.getAttribute("data-strictly-maxcheck"),10),tC=document.querySelectorAll(`input[name="${tE}"]`);if([...tC].filter(t=>t.checked).length>tw){"oninput"===this.#b.restrict&&(m.checked=!1);let tI=m.getAttribute("aria-label")||tE||"This field";b.push(`${tI}: You can select up to ${tw} options.`),g=!1}m.dataset.listenerAdded||(tC.forEach(t=>{t.addEventListener("change",()=>{[...tC].filter(t=>t.checked).length>tw&&(t.checked=!1)})}),m.dataset.listenerAdded="true")}if(m.hasAttribute("data-strictly-check")){if("checkbox"!==m.type){console.error("Validation error: The field must be a checkbox.");return}let tq=m.getAttribute("name"),tk=m.getAttribute("data-strictly-check").trim(),tM=tk.match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!tM){console.error(`Invalid format in data-strictly-check: Expected format [min, max], got '${tk}'`);return}let tT=parseInt(tM[1],10),tS=parseInt(tM[2],10),tL=document.querySelectorAll(`input[name="${tq}"]`),tY=[...tL].filter(t=>t.checked).length;if(tY<tT||tY>tS){"oninput"===this.#b.restrict&&tY>tS&&(m.checked=!1);let t2=m.getAttribute("aria-label")||tq||"This field";b.push(`${t2}: Please select between ${tT} and ${tS} options.`),g=!1}m.dataset.listenerAdded||(tL.forEach(t=>{t.addEventListener("change",()=>{[...tL].filter(t=>t.checked).length>tS&&(t.checked=!1)})}),m.dataset.listenerAdded="true")}if(m.hasAttribute("data-strictly-equalto")){let t7=m.getAttribute("data-strictly-equalto"),tz=document.querySelector(t7);if(!tz){console.error(`Invalid target selector in data-strictly-equalto: "${t7}" does not match any element.`);return}if(tz.value!==m.value){let tP=m.getAttribute("aria-label")||m.getAttribute("name")||"This field",tZ=tz.getAttribute("aria-label")||tz.getAttribute("name")||"the referenced field";b.push(`${tP} must be equal to ${tZ}.`),g=!1}}if(m.hasAttribute("data-strictly-minwords")){let tD=m.getAttribute("data-strictly-minwords");if(isNaN(tD=parseInt(tD,10))||tD<1){console.error(`Invalid value in data-strictly-minwords: "${tD}". It must be a positive number.`);return}tD>m.value.trim().split(/\s+/).filter(t=>t.length>0).length&&(b.push(`At least ${tD} words are required.`),g=!1)}if(m.hasAttribute("data-strictly-maxwords")){let tF=m.getAttribute("data-strictly-maxwords");if(isNaN(tF=parseInt(tF,10))||tF<1){console.error(`Invalid value in data-strictly-maxwords: "${tF}". It must be a positive number.`);return}let tR=m.value.trim().split(/\s+/).filter(t=>t.length>0);tR.length>tF&&("oninput"===this.#b.restrict&&(m.value=tR.slice(0,tF).join(" ")),b.push(`A maximum of ${tF} words are allowed.`),g=!1)}if(m.hasAttribute("data-strictly-words")){let tV=m.getAttribute("data-strictly-words").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!tV){console.error("Invalid format in data-strictly-words. Expected format: [min, max]");return}let tN=parseInt(tV[1],10),tH=parseInt(tV[2],10);if(tN<0||tH<tN){console.error(`Invalid min/max values in data-strictly-words: Min (${tN}) should be non-negative, and Max (${tH}) should be greater than or equal to Min.`);return}let tj=m.value.trim().split(/\s+/).filter(t=>t.length>0);if(tj.length<tN||tj.length>tH){"oninput"===this.#b.restrict&&tj.length>tH&&(m.value=tj.slice(0,tH).join(" "));let tO=m.getAttribute("aria-label")||m.name||"This field";b.push(`${tO} must contain between ${tN} and ${tH} words.`),g=!1}}if(m.hasAttribute("data-strictly-mincharacters")){let t8=m.getAttribute("data-strictly-mincharacters");if(isNaN(t8=parseInt(t8,10))||t8<1){console.error(`Invalid value in data-strictly-mincharacters: "${t8}". It must be a positive number.`);return}m.value.trim().length<t8&&(b.push(`At least ${t8} characters are required.`),g=!1)}if(m.hasAttribute("data-strictly-maxcharacters")){let t4=m.getAttribute("data-strictly-maxcharacters");if(isNaN(t4=parseInt(t4,10))||t4<1){console.error(`Invalid value in data-strictly-maxcharacters: "${t4}". It must be a positive number.`);return}m.value.trim().length>t4&&("oninput"===this.#b.restrict&&(m.value=m.value.substring(0,t4)),b.push(`Maximum allowed characters: ${t4}.`),g=!1)}if(m.hasAttribute("data-strictly-characters")){let tB=m.getAttribute("data-strictly-characters").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!tB){console.error("Invalid format in data-strictly-characters. Expected format: [min, max]");return}let tW=parseInt(tB[1],10),t1=parseInt(tB[2],10);if(tW<0||t1<tW){console.error(`Invalid min/max values in data-strictly-characters: Min (${tW}) should be non-negative, and Max (${t1}) should be greater than or equal to Min.`);return}let tU=m.value.trim().length;if(tU<tW||tU>t1){"oninput"===this.#b.restrict&&tU>t1&&(m.value=m.value.substring(0,t1));let t3=m.getAttribute("aria-label")||m.name||"This field";b.push(`${t3} must contain between ${tW} and ${t1} characters.`),g=!1}}if(m.hasAttribute("data-strictly-minselect")){if("select"!==m.tagName.toLowerCase()){console.error("Invalid element: data-strictly-minselect can only be used on <select> elements.");return}let tG=parseInt(m.getAttribute("data-strictly-minselect"),10);if(isNaN(tG)||tG<1){console.error(`Invalid value in data-strictly-minselect: "${tG}". It must be a number greater than 0.`);return}[...m.options].filter(t=>t.selected&&""!==t.value.trim()).length<tG&&(b.push(`You must select at least ${tG} option(s).`),g=!1)}if(m.hasAttribute("data-strictly-maxselect")){if("select"!==m.tagName.toLowerCase()){console.error("Invalid element: data-strictly-maxselect can only be used on <select> elements.");return}let tJ=parseInt(m.getAttribute("data-strictly-maxselect"),10);if(isNaN(tJ)||tJ<1){console.error(`Invalid value in data-strictly-maxselect: "${tJ}". It must be a number greater than 0.`);return}let tK=[...m.options].filter(t=>t.selected&&""!==t.value.trim());tK.length>tJ&&("oninput"===this.#b.restrict&&(tK[tK.length-1].selected=!1),b.push(`You can select a maximum of ${tJ} option(s).`),g=!1)}if(m.hasAttribute("data-strictly-select")){if("select"!==m.tagName.toLowerCase()){console.error("Field must be a <select> element.");return}let tQ=m.getAttribute("data-strictly-select").match(/^\[\s*(\d+)\s*,\s*(\d+)\s*\]$/);if(!tQ){console.error("Invalid format in data-strictly-select. Expected format: [min, max]");return}let tX=parseInt(tQ[1],10),t5=parseInt(tQ[2],10);if(tX<0||t5<tX){console.error(`Invalid min/max values in data-strictly-select: Min (${tX}) must be non-negative, and Max (${t5}) must be greater than or equal to Min.`);return}let t6=[...m.options].filter(t=>t.selected&&""!==t.value.trim());if(t6.length<tX||t6.length>t5){"oninput"===this.#b.restrict&&t6.length>t5&&(t6[t6.length-1].selected=!1);let et=m.getAttribute("aria-label")||m.getAttribute("name")||"Selection";b.push(`${et} must have between ${tX} and ${t5} selected options.`),g=!1}}p&&(g?this.#m(m):this.#n(m,b));let ee=(({checkbox:()=>document.querySelectorAll(`input[name="${m.name}"]:checked`).length,"select-multiple":()=>Array.from(m.selectedOptions).map(t=>t.value)})[m.type]||(()=>m.value))();return{isValid:g,value:ee,error:b}}#n(er,ea){this.#m(er),er.classList.remove(this.#b.fieldSuccessClass),er.classList.add(this.#b.fieldErrorClass);let ei=er.getAttribute("data-strictly-message");ei&&(ea=ei);let el=er.getAttribute("data-strictly-connector");if(!el)return;let es=document.getElementById(el);es&&(es.classList.add("filled"),es.innerHTML=Array.isArray(ea)?ea.join("<br>"):ea)}#m(en){if(!en||!en.hasAttribute("data-strictly-connector"))return;en.classList.remove(this.#b.fieldErrorClass);let eu=en.getAttribute("data-strictly-connector");if(!eu)return;let eo=document.getElementById(eu);eo&&(eo.textContent="",eo.classList.remove("filled")),en.classList.add(this.#b.fieldSuccessClass)}}